(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{63:(e,a,t)=>{"use strict";var r=t(7260);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},113:(e,a,t)=>{Promise.resolve().then(t.bind(t,6372))},6372:(e,a,t)=>{"use strict";t.d(a,{default:()=>c});var r=t(5155),s=t(2115),n=t(8525),l=t(63),o=t(5299);let i=(0,t(1847).A)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);function c(e){let{userId:a,userEmail:t,profile:c}=e,[d,u]=(0,s.useState)(c.username||""),[m,p]=(0,s.useState)(c.paypal_email||""),[b,g]=(0,s.useState)(!1),[x,h]=(0,s.useState)({type:"",content:""}),[y,f]=(0,s.useState)(!1),[w,j]=(0,s.useState)({type:"",content:""}),N=(0,n.U)(),k=(0,l.useRouter)(),v=async e=>{e.preventDefault(),g(!0),h({type:"",content:""});let{error:t}=await N.from("profiles").update({username:d||null,paypal_email:m||null,updated_at:new Date().toISOString()}).eq("id",a);t?h({type:"error",content:"Errore: ".concat(t.message)}):(h({type:"success",content:"Profilo aggiornato con successo!"}),k.refresh()),g(!1)},I=async()=>{f(!0),j({type:"",content:""});let{error:e}=await N.auth.resetPasswordForEmail(t,{redirectTo:"".concat(window.location.origin,"/auth/update-password")});e?j({type:"error",content:e.message}):j({type:"success",content:"Email di recupero inviata! Controlla la tua casella di posta."}),f(!1)};return(0,r.jsxs)("div",{className:"max-w-2xl",children:[(0,r.jsxs)("form",{onSubmit:v,className:"bg-background-secondary/80 backdrop-blur-md border border-white/10 p-8 rounded-2xl shadow-lg",children:[x.content&&(0,r.jsx)("div",{className:"p-3 rounded-lg mb-4 text-sm ".concat("error"===x.type?"bg-red-500/20 text-red-300":"bg-green-500/20 text-green-300"),children:x.content}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email Account"}),(0,r.jsx)("input",{type:"email",id:"email",value:t,disabled:!0,className:"w-full px-4 py-3 bg-background-main border border-gray-700 rounded-lg text-gray-400 cursor-not-allowed"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"L'email di login non pu\xf2 essere modificata."})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-1",children:"Username (Opzionale)"}),(0,r.jsx)("input",{type:"text",id:"username",value:d,onChange:e=>u(e.target.value),placeholder:"Il tuo nome utente",className:"w-full px-4 py-3 bg-background-main border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"paypal",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email PayPal"}),(0,r.jsx)("input",{type:"email",id:"paypal",value:m,onChange:e=>p(e.target.value),placeholder:"la-tua-email@paypal.com",className:"w-full px-4 py-3 bg-background-main border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Usata per i prelievi. Assicurati che sia corretta."})]}),(0,r.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-primary text-background-main font-bold py-3 px-4 rounded-lg transition-all flex items-center justify-center disabled:bg-gray-600 hover:enabled:bg-opacity-90",children:b?(0,r.jsx)(o.A,{className:"animate-spin"}):"Salva Modifiche"})]}),(0,r.jsxs)("div",{className:"mt-8 bg-background-secondary/80 backdrop-blur-md border border-white/10 p-8 rounded-2xl shadow-lg",children:[(0,r.jsx)("h3",{className:"text-xl font-heading font-bold text-white mb-2",children:"Sicurezza"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Clicca qui per inviare un link di recupero password al tuo indirizzo email."}),w.content&&(0,r.jsx)("div",{className:"p-3 rounded-lg mb-4 text-sm ".concat("error"===w.type?"bg-red-500/20 text-red-300":"bg-green-500/20 text-green-300"),children:w.content}),(0,r.jsx)("button",{onClick:I,disabled:y,className:"flex items-center justify-center gap-2 w-full bg-white/10 border border-white/20 text-white font-semibold py-3 rounded-lg hover:bg-white/20 transition-all disabled:opacity-50",children:y?(0,r.jsx)(o.A,{className:"animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i,{className:"w-5 h-5"}),"Invia link recupero password"]})})]})]})}},8525:(e,a,t)=>{"use strict";t.d(a,{U:()=>s});var r=t(3587);function s(){return(0,r.createBrowserClient)("https://siojtnnsjagksuhxrwpi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNpb2p0bm5zamFna3N1aHhyd3BpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2NTY3MTYsImV4cCI6MjA3NjIzMjcxNn0.EmfZZZ6AlEoZoTwkReD6a2LRnHekaan-RGnt1fEa3c8")}}},e=>{e.O(0,[929,441,255,358],()=>e(e.s=113)),_N_E=e.O()}]);