(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},1179:(e,t,a)=>{Promise.resolve().then(a.bind(a,8688))},2691:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115),r=a(8525),n=a(63);let i="8cedcfa8-46ab-4fe2-9f02-840be61c7b54";function l(){let[e,t]=(0,s.useState)(null),[a,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!0),h=(0,n.useRouter)();return(0,s.useEffect)(()=>{let e=(0,r.U)();(async()=>{let{data:{user:a}}=await e.auth.getUser();a?(t(a),l(a.id===i)):h.push("/"),d(!1)})();let{data:a}=e.auth.onAuthStateChange((e,a)=>{if("SIGNED_OUT"===e)h.push("/");else if("SIGNED_IN"===e){var s;let e=null!=(s=null==a?void 0:a.user)?s:null;t(e),l((null==e?void 0:e.id)===i)}});return()=>{null==a||a.subscription.unsubscribe()}},[h]),{user:e,isAdmin:a,loading:c}}},4430:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),r=a(5229);let n=(0,a(1847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);function i(e){let{isOpen:t,setIsOpen:a}=e;return(0,s.jsx)("header",{className:"sticky top-0 z-30 lg:hidden w-full bg-background-main/80 backdrop-blur-lg border-b border-white/10",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center py-4 px-4",children:[(0,s.jsxs)("h1",{className:"text-2xl font-heading font-bold text-white",children:["Cred",(0,s.jsx)("span",{className:"text-primary",children:"Pulse"})]}),(0,s.jsx)("button",{onClick:()=>a(!t),className:"p-2 text-white rounded-md hover:bg-white/10 transition-colors","aria-label":"Toggle menu",children:t?(0,s.jsx)(r.A,{className:"w-6 h-6"}):(0,s.jsx)(n,{className:"w-6 h-6"})})]})})}},5229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5882:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},7402:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var s=a(5155),r=a(2619),n=a.n(r),i=a(63),l=a(8525),c=a(1847);let d=(0,c.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),h=(0,c.A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var o=a(5882);let u=(0,c.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),m=(0,c.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),x=(0,c.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),f=[{name:"Dashboard",href:"/dashboard",icon:d,admin:!1},{name:"Missioni",href:"/missions",icon:h,admin:!1},{name:"Wallet",href:"/wallet",icon:o.A,admin:!1},{name:"Profilo",href:"/profile",icon:u,admin:!1},{name:"Admin",href:"/admin",icon:m,admin:!0}];function p(e){let{isOpen:t,isAdmin:a}=e,r=(0,i.usePathname)(),c=(0,i.useRouter)(),d=(0,l.U)(),h=async()=>{await d.auth.signOut(),c.push("/"),c.refresh()};return(0,s.jsxs)("div",{className:"\n        fixed top-0 left-0 z-40 h-screen w-64 bg-background-secondary/90 backdrop-blur-lg border-r border-white/10 p-6 flex flex-col\n        lg:sticky lg:translate-x-0 transition-transform duration-300 ease-in-out\n        ".concat(t?"translate-x-0":"-translate-x-full","\n      "),children:[(0,s.jsx)("div",{className:"mb-10",children:(0,s.jsxs)("h1",{className:"text-2xl font-heading font-bold text-white",children:["Cred",(0,s.jsx)("span",{className:"text-primary",children:"Pulse"})]})}),(0,s.jsx)("nav",{className:"flex flex-col gap-2 flex-grow",children:f.map(e=>{if(e.admin&&!a)return null;let t=r.startsWith(e.href);return(0,s.jsxs)(n(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors\n                ".concat(t?"bg-primary/20 text-primary font-semibold":"text-gray-400 hover:bg-primary/10 hover:text-white","\n              "),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:e.name})]},e.name)})}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{onClick:h,className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-secondary/10 hover:text-white w-full transition-colors",children:[(0,s.jsx)(x,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Esci"})]})})]})}},8525:(e,t,a)=>{"use strict";a.d(t,{U:()=>r});var s=a(3587);function r(){return(0,s.createBrowserClient)("https://siojtnnsjagksuhxrwpi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNpb2p0bm5zamFna3N1aHhyd3BpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2NTY3MTYsImV4cCI6MjA3NjIzMjcxNn0.EmfZZZ6AlEoZoTwkReD6a2LRnHekaan-RGnt1fEa3c8")}},8688:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(5155),r=a(2115),n=a(7402),i=a(4430),l=a(2691),c=a(5299),d=a(63);function h(e){let{children:t}=e,[a,h]=(0,r.useState)(!1),{user:o,isAdmin:u,loading:m}=(0,l.A)(),x=(0,d.useRouter)();return((0,r.useEffect)(()=>{m||u||x.push("/dashboard")},[m,u,x]),m||!u)?(0,s.jsx)("div",{className:"w-screen h-screen bg-background-main flex items-center justify-center",children:(0,s.jsx)(c.A,{className:"w-8 h-8 text-primary animate-spin"})}):(0,s.jsxs)("div",{className:"flex min-h-screen bg-background-main",children:[(0,s.jsx)(n.A,{isOpen:a,isAdmin:u}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col lg:ml-64",children:[(0,s.jsx)(i.A,{isOpen:a,setIsOpen:h}),(0,s.jsx)("main",{className:"flex-1 p-6 md:p-10 overflow-auto",children:t})]}),a&&(0,s.jsx)("div",{onClick:()=>h(!1),className:"fixed inset-0 z-30 bg-black/50 lg:hidden"})]})}}},e=>{e.O(0,[929,619,441,255,358],()=>e(e.s=1179)),_N_E=e.O()}]);