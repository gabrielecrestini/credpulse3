(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{63:(e,s,a)=>{"use strict";var t=a(7260);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})},5229:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5917:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6095:(e,s,a)=>{"use strict";a.d(s,{default:()=>u});var t=a(5155),r=a(2115),n=a(8525),i=a(63),o=a(5917),c=a(5299);function u(e){let{payoutRequestId:s}=e,[a,u]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),m=(0,n.U)(),p=(0,i.useRouter)(),h=async()=>{if(!confirm("CONFERMI di aver GIA' inviato i soldi manualmente tramite PayPal? L'operazione NON \xe8 reversibile."))return;u(!0);let{error:e}=await m.from("payout_requests").update({status:"completed",processed_at:new Date().toISOString(),transaction_id:"MANUAL_PAYPAL_COMPLETION"}).eq("id",s).eq("status","pending");e?(d("error"),console.error("Errore nel segnare come pagato:",e.message),alert("Errore: ".concat(e.message))):(d("success"),p.refresh()),u(!1)};return"success"===l?(0,t.jsx)(o.A,{className:"w-6 h-6 text-green-400"}):(0,t.jsx)("button",{onClick:h,disabled:a,className:"bg-secondary text-white font-bold px-4 py-2 rounded-lg hover:bg-secondary/80 transition-all disabled:bg-gray-600 text-sm",title:"Clicca SOLO dopo aver inviato i soldi su PayPal",children:a?(0,t.jsx)(c.A,{className:"animate-spin w-4 h-4"}):"Segna come Pagato"})}},6987:(e,s,a)=>{Promise.resolve().then(a.bind(a,7473)),Promise.resolve().then(a.bind(a,6095))},7473:(e,s,a)=>{"use strict";a.d(s,{default:()=>l});var t=a(5155),r=a(2115),n=a(8525),i=a(63),o=a(5917),c=a(5229),u=a(5299);function l(e){let{userMissionId:s}=e,[a,l]=(0,r.useState)(!1),[d,m]=(0,r.useState)(null),p=(0,n.U)(),h=(0,i.useRouter)(),b=async()=>{if(!confirm("Sei sicuro di voler approvare questa missione e assegnare i Creds?"))return;l(!0),m(null);let{data:e,error:a}=await p.rpc("approve_and_reward_mission",{p_user_mission_id:s});a||e&&!e.success?(console.error("Errore RPC:",a||e.message),m("error")):(console.log("Approvato:",e),m("success"),h.refresh()),l(!1)};return"success"===d?(0,t.jsx)(o.A,{className:"w-5 h-5 text-green-400"}):"error"===d?(0,t.jsx)(c.A,{className:"w-5 h-5 text-red-400"}):(0,t.jsx)("button",{onClick:b,disabled:a,className:"bg-primary text-background-main font-bold px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all disabled:bg-gray-600",children:a?(0,t.jsx)(u.A,{className:"animate-spin"}):"Approva"})}},8525:(e,s,a)=>{"use strict";a.d(s,{U:()=>r});var t=a(3587);function r(){return(0,t.createBrowserClient)("https://siojtnnsjagksuhxrwpi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNpb2p0bm5zamFna3N1aHhyd3BpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2NTY3MTYsImV4cCI6MjA3NjIzMjcxNn0.EmfZZZ6AlEoZoTwkReD6a2LRnHekaan-RGnt1fEa3c8")}}},e=>{e.O(0,[929,441,255,358],()=>e(e.s=6987)),_N_E=e.O()}]);